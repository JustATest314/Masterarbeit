@import models.Question
@import models.Answer

@(questionList: List[Question], answerList: List[Answer])

@main("Kraut Quiz") {

<div class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">Folien-Teil</h3>
	</div>
	<div class="panel-body">

		<i><b>Reminder: Denk' dran, das PDF zu re-aktivieren!</b></i>
		<!-- TODO PDF deactivated for development, re-activate for production -->
		<!--  <embed src="http://www.einfach-fuer-alle.de/artikel/checkliste-barrierefreie-pdf/Checkliste-Barrierefreies-PDF.pdf" width="100%" height="500"></embed> -->    
	</div>
</div>

<!-- TODO remove in production, only for development -->
<script>
		// $(document).ready(function() {
			// $('#icon').click(function() {
				// var $this = $(this);
				// $this.css("color","orange");
				// var num = $('#num');
				// var currentNumber = num.text().length ? parseInt(num.text()) : 0;
				// num.text(currentNumber + 1);
			// });
		// });
</script>

@*
<!-- FIXME Does not work as intended so far, only updates the first question-score -->
<script language="javascript"> 
function voteUp() {
	var num = $('#num');
	var currentNumber = num.text().length ? parseInt(num.text()) : 0;
	num.text(currentNumber + 1);
}
</script>


<script>
$(document).ready(function(){
    $(".btn-default").click(function(){
        $(this).slideUp().slideDown();
        console.log($('.num').html());

    });
});
</script>
*@

<!-- FIXME Buttons in the answer-list dont work yet -->
<script>
$(document).ready(function(){
	$(".btn-default").click(function(){
		if( $(this).val() == 'voteUp'){
			$(this).html( "<span class='glyphicon glyphicon-arrow-up' aria-hidden='true' style='color:orange'></span>" );
	    	var currentScore = $(this).parent('li').find('.num').text();
	    	$(this).parent('li').find('.num').html(parseInt(currentScore) + 1);
	    	console.log($(this).parent('li'));
		}
		else if($(this).val() == 'voteDown'){
			$(this).html( "<span class='glyphicon glyphicon-arrow-down' aria-hidden='true' style='color:blue'></span>" );
	    	var currentScore = $(this).parent('li').find('.num').text();
	    	$(this).parent('li').find('.num').html(parseInt(currentScore) - 1);
		}
		else if($(this).val() == 'editQuestion'){
			var currentScore = $(this).parent('li').find('.num').text();
			
			<!-- TODO Send voteScore to controller and put it in DB -->
			<!-- AJAX script to send the voteScore to the controller and then put it into the DB -->
			$.ajax({ 
				type : 'POST',
				url : '@routes.Application.testMethod()',
				data : {text : currentScore},
				success : function(data){
					}
			});
			
			console.log("edit-button");
			
			alert("TODO - Edit Question");
    	}
		else if($(this).val() == 'deleteQuestion'){
			alert("TODO - Delete Question");
		}
	});
});
</script>

<div class="panel panel-default">
	<div class="panel-heading">
		<h3 class="panel-title">Frage- / Antwort-Teil</h3>
	</div>
	<div class="panel-body">
		<ul class="list-group">

		@for(question <- questionList){

			<!-- Questions -->
			<li class="list-group-item" >
				<button type="button" class="btn btn-default"  id="upvoteButton" 
					value="voteUp" style="width: 30px; height: 30px; text-align: center; vertical-align: center;">
					<span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
				</button>
				
				<span class="num"> @question.voteScore </span>
				
				<button type="button" class="btn btn-default" id="downvoteButton" 
					value="voteDown" style="width: 30px; height: 30px; text-align: center;">
					<span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
				</button>

				<!-- TODO Change to the userpage -->
				&nbsp; @question.questionText - <i><a href="@routes.Application.showUsers()">@question.userID </a></i> &nbsp;
		
				<button type="button" class="btn btn-default" id="editQuestionButton" 
					value="editQuestion" style="width: 30px; height: 30px; text-align: center;">
					<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
				</button>

				<button type="button" class="btn btn-default" id="deleteQuestionButton" 
					value="deleteQuestion" style="width: 30px; height: 30px; text-align: center;">
					<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
				</button>
				
				<a href="@routes.Application.writeAnswer(question.questionID)">Frage beantworten</a>
<p></p>

			<!-- Answers -->
			<ul class="list-group" style="margin-left:20px" >
				@for(answer <- answerList){
					@if(question.questionID == answer.questionID){

					<li class="list-group-item" > 
						<button type="button" class="btn btn-default" id="upvoteButton" 
							value="voteUp" style="width: 30px; height: 30px; text-align: center;">
							<span class="glyphicon glyphicon-arrow-up" aria-hidden="true" style="color:orange";></span>
						</button>

						<span id="num"> @answer.voteScore </span>
					
						<button type="button" class="btn btn-default" id="downvoteButton" 
							value="voteDown" style="width: 30px; height: 30px; text-align: center;">
							<span class="glyphicon glyphicon-arrow-down" aria-hidden="true" style="color:blue"></span>
						</button>

		&nbsp; @answer.answerText - <i><a href="@routes.Application.showUsers()">@answer.userID</a></i> &nbsp;

		<button type="button" class="btn btn-default" id="editQuestionButton" 
		value="editQuestion" style="width: 30px; height: 30px; text-align: center;">
		<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
		</button>

		<button type="button" class="btn btn-default" id="deleteQuestionButton" 
		value="deleteQuestion" style="width: 30px; height: 30px; text-align: center;">
		<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
		</button>	
				}
		}
			</ul>
}
	</ul>


<!-- TODO Not working at the moment! -->    
<nav>
	<ul class="pagination">
		<li ><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
		<li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
		<li ><a href="#">2 <span class="sr-only">(current)</span></a></li>
		<li ><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
	</ul>
</nav>

<a href="@routes.Application.askQuestion()"><button class="btn btn-primary" type="submit">Frage stellen</button></a>

<!-- TODO Remove in production, only needed for development -->
@* <a href="@routes.Application.writeAnswer()"><button class="btn btn-default" type="submit">Antwort geben</button></a> *@ 
<!-- TODO Remove in production, only needed for development -->
<a href="@routes.Application.initDB()"><button class="btn btn-primary" type="submit">Init DB</button></a>
</div>
</div>
}
